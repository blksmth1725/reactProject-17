System.register(["@urql/core","jotai","wonka"],function(v){"use strict";var A,i,h,q;return{setters:[function(y){A=y.createClient},function(y){i=y.atom},function(y){h=y.pipe,q=y.subscribe}],execute:function(){v({atomWithMutation:E,atomWithQuery:x,atomWithSubscription:M});const y=(()=>{try{return process.env.JOTAI_URQL_DEFAULT_URL}catch{return}})()||"/graphql",P=v("clientAtom",i(A({url:y}))),g=m=>"data"in m&&!m.error;function x(m,p=o=>o(P)){const o=i(n=>{const t=m(n);if(t.pause)return null;const r=p(n);let s=null;const u=i(new Promise(e=>{s=e}));let a=()=>{throw new Error("setting result without mount")};const c=e=>{if(e instanceof Promise){a(e);return}if(!g(e))throw new Error("result does not have data");s?(s(e),s=null):a(e)};r.query(t.query,t.variables,{...t.requestPolicy&&{requestPolicy:t.requestPolicy},...t.context}).toPromise().then(c).catch(()=>{}),u.onMount=e=>{a=e};const b=i(null),l=i(e=>e(u),(e,w,f)=>{const L=h(r.query(t.query,t.variables,{...t.requestPolicy&&{requestPolicy:t.requestPolicy},...t.context}),q(c));w(b,L),f(()=>{var d;return(d=e(b))==null?void 0:d.unsubscribe()})});return l.onMount=e=>{let w;return e(f=>{w=f}),w},{args:t,client:r,resultAtom:l,subscriptionAtom:b,listener:c}});return i(n=>{const t=n(o);if(!t)return null;const{resultAtom:r}=t;return n(r)},(n,t,r)=>{switch(r.type){case"reexecute":{const s=n(o);if(!s)throw new Error("query is paused");const{args:u,client:a,subscriptionAtom:c,listener:b}=s;b(new Promise(()=>{}));const l=h(a.query(u.query,u.variables,{...u.requestPolicy&&{requestPolicy:u.requestPolicy},...u.context,...r.opts}),q(b)),e=n(c);e==null||e.unsubscribe(),t(c,l)}}})}function E(m,p=o=>o(P)){const o=i(new Promise(()=>{}));return i(n=>n(o),(n,t,r)=>{t(o,new Promise(()=>{}));const s=p(n),u=m(n);s.mutation(u,r.variables,r.context).toPromise().then(a=>{var c;t(o,a),(c=r.callback)==null||c.call(r,a)}).catch(()=>{})})}const W=m=>"data"in m;function M(m,p=o=>o(P)){const o=i(n=>{const t=m(n);if(t.pause)return{args:t};const r=p(n);let s=null;const u=i(new Promise(e=>{s=e}));let a=()=>{throw new Error("setting result without mount")},c=!1;const b=e=>{if(!W(e))throw new Error("result does not have data");s?(c||(l==null||l.unsubscribe(),l=null),s(e),s=null):a(e)};let l=h(r.subscription(t.query,t.variables,t.context),q(b));return u.onMount=e=>(a=e,c=!0,l||(l=h(r.subscription(t.query,t.variables,t.context),q(b))),()=>l==null?void 0:l.unsubscribe()),{resultAtom:u,args:t}});return i(n=>{const{resultAtom:t}=n(o);return t?n(t):null})}}}});
